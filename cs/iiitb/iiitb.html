<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bible Word Checker</title>
  <style>
    :root{
      --bg:#0f172a;
      --card:#111827;
      --muted:#94a3b8;
      --text:#e5e7eb;
      --accent:#22c55e;
      --accent-2:#38bdf8;
      --danger:#ef4444;
      --ring:#334155;
    }
    * { box-sizing: border-box; }
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 20% -20%, #1e293b 0%, var(--bg) 60%);
      color:var(--text);
    }
    header{
      position: sticky; top:0; z-index:10;
      background:rgba(15,23,42,.8); backdrop-filter: blur(10px);
      border-bottom:1px solid var(--ring);
    }
    .wrap{ max-width:1100px; margin:0 auto; padding:16px; }
    .brand{ display:flex; align-items:center; gap:14px; }
    .brand img{ height:40px; width:auto; border-radius:12px; padding:4px; }
    .brand h1{ font-size: clamp(18px, 3vw, 22px); margin:0; letter-spacing:.3px; }

    main{ padding:28px 16px 56px; }
    .grid{
      display:grid; gap:18px; grid-template-columns: 1fr; align-items:start;
    }
    @media (min-width: 960px){ .grid{ grid-template-columns: 1.15fr .85fr; } }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.0));
      border:1px solid var(--ring); border-radius:18px; padding:18px; box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    .card h2{ margin:0 0 12px; font-size:18px; letter-spacing:.2px; }
    .muted{ color:var(--muted); font-size:13px; }
    .controls{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin:12px 0 10px; }
    .controls input[type="file"]{ display:none; }
    .btn{
      appearance:none; border:1px solid var(--ring); background:#0b1222; color:var(--text);
      padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:600; letter-spacing:.2px;
    }
    .btn:hover{ border-color:#475569; }
    .btn.accent{ border-color: transparent; background: linear-gradient(90deg, var(--accent), var(--accent-2)); color:#052014; }
    .statbar{ display:flex; gap:14px; flex-wrap:wrap; margin:6px 0 2px; }
    .pill{
      border:1px solid var(--ring); padding:6px 10px; border-radius:999px; font-size:13px;
      background: #0b1222; display:flex; align-items:center; gap:8px;
    }
    .pill .dot{ width:8px; height:8px; border-radius:999px; display:inline-block; }
    .dot.ok{ background: var(--accent); }
    .dot.bad{ background: var(--danger); }

    textarea{
      width:100%; background:#0b1222; color:var(--text);
      border:1px solid var(--ring); border-radius:14px; min-height:220px; padding:14px; line-height:1.5; resize:vertical;
    }
    textarea:focus{ outline:none; box-shadow: 0 0 0 3px rgba(56,189,248,.25); border-color:#64748b; }
    .small{ font-size:12px; }

    table{ width:100%; border-collapse: collapse; font-size:14px; }
    th, td{ text-align:left; padding:8px 10px; border-bottom:1px solid #1f2937; }
    th{ position:sticky; top:0; background:#0b1222; z-index:1; }
    .scroller{ max-height:340px; overflow:auto; border:1px solid var(--ring); border-radius:12px; }

    .notice{ border:1px dashed #334155; padding:10px 12px; border-radius:12px; background:#0b1222; }
    .footer{ color:var(--muted); font-size:12px; margin-top:10px; }
  </style>
</head>
<body>
  <header>
    <div class="wrap brand">
      <img src="logo.png" alt="Logo" onerror="this.style.opacity=0.5" />
      <h1>IIITB</h1>
      <link rel="icon" type="image/x-icon" href="logo.png">
    </div>
  </header>

  <main>
    <div class="wrap grid">
      <section class="card">
        <h2>Paste text to analyze</h2>
        <p class="muted">Type or paste any text below. We'll highlight how many words also appear anywhere in the Bible (vocabulary-based, not exact verses).</p>
        <textarea id="inputText" placeholder="Paste your text here…"></textarea>

        <div class="controls">
          <button id="clearBtn" class="btn">Clear</button>
          <button id="demoBtn" class="btn accent">Demo text</button>
        </div>
        <div id="sourceInfo" class="small muted">Using built-in demo wordlist (very small). For best accuracy, click <em>Load Bible text</em> and select a full Bible .txt file (e.g., public-domain KJV).</div>
      </section>

      <section class="card">
        <h2>Results</h2>
        <div class="statbar">
          <div class="pill"><span class="dot ok"></span><strong id="matchCount">0</strong>&nbsp;matches</div>
          <div class="pill"><span class="dot ok"></span><strong id="uniqueMatchCount">0</strong>&nbsp;unique matches</div>
          <div class="pill"><span class="dot bad"></span><strong id="nonBibleCount">0</strong>&nbsp;not in Bible</div>
          <div class="pill"><span class="dot ok"></span><strong id="matchPct">0%</strong>&nbsp;of words</div>
        </div>
        <p class="muted small" id="vocabSize">Bible vocabulary: 0 words</p>

        <div class="scroller" id="tables">
          <table>
            <thead>
              <tr>
                <th>Word</th>
                <th>Count in your text</th>
              </tr>
            </thead>
            <tbody id="matchTable"></tbody>
          </table>
        </div>

        <details class="footer">
          <summary>What does this do?</summary>
          This checks if each word (after lowercasing and stripping punctuation) exists in a Bible vocabulary list built from a Bible text. It counts total token matches and unique matching words.
        </details>
      </section>
    </div>
  </main>

<script>
const normalize = s => s.normalize('NFKD').replace(/\p{M}/gu,'').toLowerCase();
const tokenize = text => normalize(text).split(/[\s\p{P}\p{S}]+/u).filter(Boolean);
const countFreq = arr => { const m = new Map(); for (const w of arr) m.set(w, (m.get(w) || 0) + 1); return m; };

let bibleVocab = new Set();
let bibleSourceLabel = '';

const inputEl = document.getElementById('inputText');
const matchTable = document.getElementById('matchTable');
const matchCountEl = document.getElementById('matchCount');
const uniqueMatchCountEl = document.getElementById('uniqueMatchCount');
const nonBibleCountEl = document.getElementById('nonBibleCount');
const matchPctEl = document.getElementById('matchPct');
const vocabSizeEl = document.getElementById('vocabSize');
const sourceInfoEl = document.getElementById('sourceInfo');

function updateVocabInfo(){
  vocabSizeEl.textContent = `Bible vocabulary: ${bibleVocab.size.toLocaleString()} words`;
  sourceInfoEl.innerHTML = `Source: <strong>${bibleSourceLabel}</strong>`;
}

function analyze(){
  const tokens = tokenize(inputEl.value);
  const total = tokens.length;
  const freq = countFreq(tokens);

  let matchTokens = 0;
  const matchFreq = [];
  for (const [word, count] of freq.entries()){
    if (bibleVocab.has(word)){
      matchTokens += count;
      matchFreq.push([word, count]);
    }
  }
  matchFreq.sort((a,b)=> b[1]-a[1] || a[0].localeCompare(b[0]));
  matchTable.innerHTML = matchFreq.map(([w,c]) => `<tr><td>${w}</td><td>${c}</td></tr>`).join('');

  const nonBible = total - matchTokens;
  const pct = total ? Math.round((matchTokens/total)*100) : 0;
  matchCountEl.textContent = matchTokens.toLocaleString();
  uniqueMatchCountEl.textContent = matchFreq.length.toLocaleString();
  nonBibleCountEl.textContent = nonBible.toLocaleString();
  matchPctEl.textContent = pct + '%';
}

fetch('bible.txt')
  .then(res => res.text())
  .then(text => {
    bibleVocab = new Set(tokenize(text));
    bibleSourceLabel = `bible.txt — ${bibleVocab.size.toLocaleString()} unique words`;
    updateVocabInfo();
    analyze();
  })
  .catch(err => {
    bibleVocab = new Set(['the','and','god','lord']);
    bibleSourceLabel = 'Fallback demo list';
    updateVocabInfo();
    analyze();
  });

document.getElementById('clearBtn').addEventListener('click', ()=>{ inputEl.value=''; analyze(); });
document.getElementById('demoBtn').addEventListener('click', ()=>{ inputEl.value = `In the beginning was the Word, and the Word was with God, and the Word was God.`; analyze(); });
inputEl.addEventListener('input', analyze);
</script>

</body>
</html>
